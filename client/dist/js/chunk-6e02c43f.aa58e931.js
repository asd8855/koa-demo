(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e02c43f"],{"292c":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n("d225"),r=n("b0b4"),o=(n("a49b"),n("b1dd")),a="eduplus-uc",c=function(){function e(){Object(i["a"])(this,e)}return Object(r["a"])(e,null,[{key:"queryRelationChildInfoList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o["a"].getJSON(a+"/rest/uc/child/allRelationChildInfoListByPhone",e)}},{key:"queryIsBindAlipayId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["a"].postJSON(a+"/rest/uc/user/isbindAlipayId",e,t)}},{key:"unBindChild",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["a"].postJSON(a+"/rest/uc/child/unBindChild",e,t)}},{key:"unBindChildByPhone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["a"].postJSON(a+"/rest/uc/child/unBindChildByPhone",e,t)}},{key:"querySchoolList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["a"].getJSON(a+"/rest/uc/school/schoolListByDistrictNo",e,t)}},{key:"bindAlipayId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["a"].postJSON(a+"/rest/uc/user/bindAlipayId",e,t)}},{key:"queryUserInfoByPhone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["a"].getJSON(a+"/rest/uc/user/queryUserInfoByPhone",e,t)}},{key:"queryUniqueChild",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["a"].getJSON(a+"/rest/uc/child/uniqueChild",e,t)}},{key:"bindChild",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["a"].postJSON(a+"/rest/uc/child/bindChild",e,t)}},{key:"sendSMSCode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["a"].postJSON(a+"/rest/uc/user/sendSMSCode",e,t)}},{key:"queryChildRelation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["a"].getJSON(a+"/rest/uc/child/childRelation",e,t)}},{key:"queryUserIdentityByPhone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["a"].getJSON(a+"/rest/uc/user/userIdentityByPhone",e,t)}},{key:"queryIsBindWx",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["a"].postJSON(a+"/rest/uc/user/isBindWx",e,t)}},{key:"bindWxId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o["a"].postJSON(a+"/rest/uc/user/bindWx",e,t)}},{key:"unBindWx",value:function(e,t){return o["a"].postJSON(a+"/rest/uc/user/unBindWx",e,t)}},{key:"getAllCityList",value:function(){return o["a"].getJSON(a+"/rest/uc/baseData/allCity")}},{key:"querySchoolByCity",value:function(e){return o["a"].getJSON(a+"/rest/uc/school/querySchoolByCity",e)}}]),e}()},"4ed6":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"search-child"},[n("van-cell-group",[n("van-cell",{attrs:{title:"学校所在地","is-link":"",value:e.addressContent,"value-class":"请选择"==e.addressContent?"value-class":"value-class1"},on:{click:e._choseCity}}),n("van-cell",{attrs:{title:"所在学校","is-link":"",value:e.schoolContent,"value-class":"请选择"==e.schoolContent?"value-class":"value-class1"},on:{click:e._choseSchool}}),n("van-field",{attrs:{label:"学生姓名",placeholder:"请输入学生姓名","input-align":"left"},model:{value:e.childName,callback:function(t){e.childName=t},expression:"childName"}}),n("van-field",{attrs:{label:e.checkTermLabel,placeholder:e.checkTermPlaceholder,"input-align":"left"},model:{value:e.checkTerm,callback:function(t){e.checkTerm=t},expression:"checkTerm"}})],1),n("div",{staticClass:"submit-box"},[n("van-button",{staticClass:"submit-btn",attrs:{loading:e.btnLoading,"loading-text":"加载中...",type:"primary",size:"normal"},on:{click:e.bindUser}},[e._v("绑定")])],1)],1)},r=[],o=(n("96cf"),n("3b8d")),a=n("292c"),c=n("813e"),s=(n("9ef1"),n("f44b")),u={data:function(){return{childName:"",checkTerm:"",checkTermLabel:"家长手机号",checkTermPlaceholder:"请输入家长手机号",checkValue:"MOBILE",addressContent:"请选择",schoolContent:"请选择",loading:!1,btnLoading:!1,cityInfo:{},schoolInfo:{}}},created:function(){document.title="关联孩子"},mounted:function(){},methods:{onChange:function(e,t,n){if(0==n){var i=this.province.filter(function(e){return e.id==t[0].id});this.getCity({provinceId:i[0].id},e)}if(1==n){var r=this.city.filter(function(e){return e.id==t[1].id});console.log("city->",r),this.getDistrict({cityId:r[0].id},e)}},queryUniqueChild:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={schoolNo:this.currentSchool.schoolNo,childName:this.childName,verifiyValue:this.checkTerm,source:this.currentSchool.source},e.next=3,a["a"].queryUniqueChild(t);case 3:n=e.sent,n&&n.data&&n.data.childNo?this.bindChild(n.data.childNo):this.$toast("未查询到该孩子信息");case 5:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),bindChild:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,i,r,o=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=c["a"].getLgObj("userInfo"),n.userId,n.alipayUid,i=n.wxOpenId,r={userId:n.userId,alipayUID:n.alipayUid||"",wxOpenId:i||"",childNo:t,source:this.currentSchool.source},this.btnLoading=!0,e.next=6,a["a"].bindChild({},r).catch(function(e){o.btnLoading=!1});case 6:e.sent,this.btnLoading=!1,r&&(this.$toast("添加成功"),this.$router.push({path:"/relevantChild"}));case 9:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),_choseSchool:function(){if("请选择"!=this.addressContent){var e=this;s["a"].$off("schoolInfo"),s["a"].$on("schoolInfo",function(t){e.confirmSchool(t)}),this.$router.push({path:"/schoolList",query:{cityId:this.cityInfo.cityId}})}else this.$toast("请选择学校所在地")},_choseCity:function(){var e=this;s["a"].$off("cityInfo"),s["a"].$on("cityInfo",function(t){e.addressContent&&e.addressContent!=t.cityName&&(e.cityInfo=t,e.addressContent=t.cityName,e.currentSchool={},e.schoolContent="")}),this.$router.push({path:"/cityList"})},confirmSchool:function(e){switch(this.currentSchool=e,this.schoolContent=e.schoolName,e.verifiyType){case"MOBILE":this.checkTermLabel="家长手机号",this.checkTermPlaceholder="请输入家长手机号";break;case"STUDENT_CODE":this.checkTermLabel="学生学号",this.checkTermPlaceholder="请输入学生学号";break;case"ID_NO":this.checkTermLabel="身份证号",this.checkTermPlaceholder="请输入身份证号";break}},bindUser:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("请选择"!=this.addressContent){e.next=3;break}return this.$toast("请选择学校所在地"),e.abrupt("return");case 3:if("请选择"!=this.schoolContent){e.next=6;break}return this.$toast("请选择学校!"),e.abrupt("return");case 6:if(this.childName){e.next=9;break}return this.$toast("请输入学生姓名！"),e.abrupt("return");case 9:if(this.checkTerm){e.next=12;break}return"MOBILE"==this.currentSchool.attrValue?this.$toast("请输入家长手机号"):"STUDENT_CODE"==this.currentSchool.attrValue?this.$toast("请输入学生学号"):this.$toast("请输入身份证号"),e.abrupt("return");case 12:this.queryUniqueChild();case 13:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}()}},l=u,h=(n("fedd"),n("f5f5"),n("2877")),d=Object(h["a"])(l,i,r,!1,null,"e6c8ffe2",null);t["default"]=d.exports},"868b":function(e,t,n){},aa29:function(e,t,n){},f44b:function(e,t,n){"use strict";var i=n("a026"),r=new i["a"];t["a"]=r},f5f5:function(e,t,n){"use strict";var i=n("aa29"),r=n.n(i);r.a},fedd:function(e,t,n){"use strict";var i=n("868b"),r=n.n(i);r.a}}]);