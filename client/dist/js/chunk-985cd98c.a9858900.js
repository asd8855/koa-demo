(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-985cd98c"],{"277c":function(e,t,n){"use strict";var i=n("59aa"),s=n.n(i);s.a},"292c":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("d225"),s=n("b0b4"),r=(n("a49b"),n("b1dd")),a="eduplus-uc",o=function(){function e(){Object(i["a"])(this,e)}return Object(s["a"])(e,null,[{key:"queryRelationChildInfoList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r["a"].getJSON(a+"/rest/uc/child/allRelationChildInfoListByPhone",e)}},{key:"queryIsBindAlipayId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].postJSON(a+"/rest/uc/user/isbindAlipayId",e,t)}},{key:"unBindChild",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].postJSON(a+"/rest/uc/child/unBindChild",e,t)}},{key:"unBindChildByPhone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].postJSON(a+"/rest/uc/child/unBindChildByPhone",e,t)}},{key:"querySchoolList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].getJSON(a+"/rest/uc/school/schoolListByDistrictNo",e,t)}},{key:"bindAlipayId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].postJSON(a+"/rest/uc/user/bindAlipayId",e,t)}},{key:"queryUserInfoByPhone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].getJSON(a+"/rest/uc/user/queryUserInfoByPhone",e,t)}},{key:"queryUniqueChild",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].getJSON(a+"/rest/uc/child/uniqueChild",e,t)}},{key:"bindChild",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].postJSON(a+"/rest/uc/child/bindChild",e,t)}},{key:"sendSMSCode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].postJSON(a+"/rest/uc/user/sendSMSCode",e,t)}},{key:"queryChildRelation",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].getJSON(a+"/rest/uc/child/childRelation",e,t)}},{key:"queryUserIdentityByPhone",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].getJSON(a+"/rest/uc/user/userIdentityByPhone",e,t)}},{key:"queryIsBindWx",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].postJSON(a+"/rest/uc/user/isBindWx",e,t)}},{key:"bindWxId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r["a"].postJSON(a+"/rest/uc/user/bindWx",e,t)}},{key:"unBindWx",value:function(e,t){return r["a"].postJSON(a+"/rest/uc/user/unBindWx",e,t)}},{key:"getAllCityList",value:function(){return r["a"].getJSON(a+"/rest/uc/baseData/allCity")}},{key:"querySchoolByCity",value:function(e){return r["a"].getJSON(a+"/rest/uc/school/querySchoolByCity",e)}}]),e}()},5118:function(e,t,n){(function(e){var i="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,s=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(s.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(s.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n("6017"),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n("c8ba"))},"59aa":function(e,t,n){},6017:function(e,t,n){(function(e,t){(function(e,n){"use strict";if(!e.setImmediate){var i,s=1,r={},a=!1,o=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,"[object process]"==={}.toString.call(e.process)?f():p()?m():e.MessageChannel?v():o&&"onreadystatechange"in o.createElement("script")?y():g(),u.setImmediate=c,u.clearImmediate=l}function c(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var a={callback:e,args:t};return r[s]=a,i(s),s++}function l(e){delete r[e]}function d(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i);break}}function h(e){if(a)setTimeout(h,0,e);else{var t=r[e];if(t){a=!0;try{d(t)}finally{l(e),a=!1}}}}function f(){i=function(e){t.nextTick(function(){h(e)})}}function p(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function m(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"===typeof n.data&&0===n.data.indexOf(t)&&h(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),i=function(n){e.postMessage(t+n,"*")}}function v(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;h(t)},i=function(t){e.port2.postMessage(t)}}function y(){var e=o.documentElement;i=function(t){var n=o.createElement("script");n.onreadystatechange=function(){h(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function g(){i=function(e){setTimeout(h,0,e)}}})("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,n("c8ba"),n("f28c"))},6154:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.isShow?i("div",[i("div",{staticClass:"header-hint"},[e._v("为了孩子的信息安全，请验证手机号。")]),i("div",{staticClass:"container"},[i("van-field",{attrs:{type:"tel",label:"手机号",maxlength:"11",placeholder:"请输入学校预留手机号"},model:{value:e.phone,callback:function(t){e.phone=t},expression:"phone"}}),i("van-field",{attrs:{type:"tel",maxlength:"4",center:"",clearable:"",label:"验证码",placeholder:"请输入短信验证码"},model:{value:e.sms,callback:function(t){e.sms=t},expression:"sms"}},[i("van-button",{staticClass:"sms-button",style:{color:e.smsText.indexOf("验证码")>-1?"#00A7F7":"#666"},attrs:{slot:"button",disabled:-1==e.smsText.indexOf("验证码"),size:"small"},on:{click:e.startSmS},slot:"button"},[e._v(e._s(e.smsText))])],1)],1),i("div",{staticClass:"service-text"},[e._v("登录即代表您已同意 "),i("span",{staticClass:"user-text",on:{click:function(t){return e.gotoAgreement("platform")}}},[e._v("《学加家平台服务协议》")]),e._v("和"),i("span",{staticClass:"user-text",on:{click:function(t){return e.gotoAgreement("data")}}},[e._v("《数据隐私政策》")])]),i("div",{staticClass:"content-box"},[i("van-button",{staticClass:"bind-btn",attrs:{type:"primary",loading:e.btnLoading,"loading-text":"加载中...",size:"normal"},on:{click:e.bindUser}},[e._v("绑定")]),i("div",{staticClass:"exp"},[e._v("注：绑定前请联系学校老师开通账号。")]),e.isLogin?e._e():i("div",{staticClass:"teacher-hint"},[i("img",{staticClass:"hint-icon",attrs:{src:n("ac04"),alt:""}}),i("div",[e._v("\n        该手机号为老师身份，请搜索关注【学加家校园】"+e._s(e.isWx?"公众号":"生活号")+"使用老师端功能。\n        "),i("span",{staticClass:"copy-text",on:{click:e.copyDownLoadURL}},[e._v("点击复制")])])])],1)]):e._e()},s=[],r=(n("96cf"),n("3b8d")),a=(n("d225"),n("b0b4"),n("a49b"),n("b1dd"),n("5118")),o=n("292c"),u=n("813e"),c=n("8916"),l=n("9ef1"),d={data:function(){return{sms:"",phone:"",time:10,smsText:"获取验证码",isShow:!1,btnLoading:!1,timer:null,isLogin:!0,isWx:l["b"]}},created:function(){document.title="账号绑定",this.headimgurl=this.$route.query.headimgurl,console.log("this.headimgurl=>",this.headimgurl),u["a"].setLg("headimgurl",this.headimgurl),u["a"].setLgObj("loginInfo",this.$route.query)},activated:function(){l["a"]?this.queryIsBindAlipayId():this.queryIsBindWx()},deactivated:function(){},methods:{gotoAgreement:function(e){this.$router.push({path:"/agreement",query:{type:e}})},queryIsBindAlipayId:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,i,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$toast.loading({duration:0,message:"加载中...."}),t=this.$route.query.alipayUserId||"",n={alipayUid:t},e.next=5,o["a"].queryIsBindAlipayId({},n);case 5:i=e.sent,this.$toast.clear(),i?(s=i.data,u["a"].setLgObj("userInfo",i.data),0==s.login?this.isShow=!0:(r=s.mobile,"1"==r.substr(0,1)?(this.eventCommev(),this.$router.push({path:"/xysOrderList"})):this.isShow=!0)):this.isShow=!0;case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),queryIsBindWx:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,i,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.$toast.loading({duration:0,message:"加载中...."}),t=this.$route.query.openid||"",n={wxOpenId:t,code:"mp_c"},e.next=5,o["a"].queryIsBindWx({},n);case 5:i=e.sent,this.$toast.clear(),i&&(i.data?(s=i.data,u["a"].setLgObj("userInfo",i.data),0==s.login?this.isShow=!0:(r=s.mobile,"1"==r.substr(0,1)?(this.eventCommev(),this.$router.push({path:"/xysOrderList"})):this.isShow=!0)):this.isShow=!0);case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),bindUser:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,i,s,r=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.phone){e.next=3;break}return this.$toast("请输入手机号码！"),e.abrupt("return");case 3:if(/^1[3456789]\d{9}$/.test(this.phone)){e.next=6;break}return this.$toast("请输入正确的手机号码"),e.abrupt("return");case 6:if(this.sms){e.next=9;break}return this.$toast("请输入验证码！"),e.abrupt("return");case 9:return t={phoneNum:this.phone},n=!1,e.next=13,o["a"].queryUserIdentityByPhone(t,{}).catch(function(e){n=!1,r.isLogin=n});case 13:i=e.sent,i&&i.data&&(s=i.data,n=(!s.ucUserType||!s.xysUserType||2!=s.ucUserType||2!=s.xysUserType)&&(s.ucUserType?2!=s.ucUserType:!s.xysUserType||2!=s.xysUserType)),this.isLogin=n,n&&(l["a"]?this.bindAlipayId():this.bindWxId());case 17:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),bindAlipayId:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,i,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=u["a"].getLgObj("userInfo"),n={source:"c_ali_h5",alipayUid:t.alipayUid,mobile:this.phone,smsCode:this.sms},e.next=4,o["a"].bindAlipayId({},n);case 4:i=e.sent,i&&(s=i.data,u["a"].setLgObj("userInfo",i.data),0==s.login?this.isShow=!0:(this.eventCommev(),this.phone="",this.sms="",this.$router.push({path:"/xysOrderList"})));case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),bindWxId:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return u["a"].getLgObj("userInfo"),t={mobile:this.phone,smsCode:this.sms,source:"c_wx_h5",wxOpenId:this.$route.query.openid||"",code:"mp_c",wxUnionId:this.$route.query.unionid||""},e.next=4,o["a"].bindWxId({},t);case 4:n=e.sent,n&&(i=n.data,u["a"].setLgObj("userInfo",n.data),0==i.login?this.isShow=!0:(this.eventCommev(),this.phone="",this.sms="",this.$router.push({path:"/xysOrderList"})));case 6:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),startSmS:function(){this.phone?/^1[3456789]\d{9}$/.test(this.phone)?this.sendTestCode():this.$toast("请输入正确的手机号码"):this.$toast("请输入手机号码！")},sendTestCode:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t,n,i,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={mobile:this.phone,appCode:"XJJ_C",num:0},e.next=3,o["a"].sendSMSCode({},t);case 3:if(n=e.sent,console.log("succ--\x3e",n),!n){e.next=10;break}if(!this.timer){e.next=8;break}return e.abrupt("return");case 8:i=60,this.timer=Object(a["setInterval"])(function(){i--,s.smsText="".concat(i,"s后可重发"),0==i&&(Object(a["clearInterval"])(s.timer),s.timer=null,s.smsText="重获验证码")},1e3);case 10:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),copyDownLoadURL:function(){var e="学加家校园",t=document.createElement("input");document.body.appendChild(t),t.setAttribute("value",e),t.select(),document.execCommand("copy")&&(document.execCommand("copy"),this.$toast("复制成功")),document.body.removeChild(t)},eventCommev:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t={type:"login",event:"login"},e.next=3,c["a"].eventCommev(t);case 3:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()}},h=d,f=(n("277c"),n("daf0"),n("2877")),p=Object(f["a"])(h,i,s,!1,null,"2e6ff0b1",null);t["default"]=p.exports},ac04:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEQAAABECAMAAAAPzWOAAAAAXVBMVEUAAAD/bXX/bHT/dHn/bHX/bHX/bXX/bXX/bHT/bXX/b3f/bnT/co3/lpb/bXT/bHb/cHj/bXX/bHX/bXX/bXT/bHX/bnX/b3f/dX3/b3b/bnb/bnX/bXX/bHb/bHTsxFhuAAAAHnRSTlMA4d4X+cd9lOrYHVEIBdOEJPLloZGLSDwOLkZit2r6qaSvAAABuklEQVRYw7WY65KCMAyFtfRiqaJcVNTd8/6PuWjLOOuSBsx6/qbzTWlCetLVh1UE2xrf1HXjTWtDsZxw7iq8qOrOi/ZgFSal7Nz9lE6DlHblDMR2r5GV3m85xkmBlTplEbsjZum4yxyowUwZ8oAPCrOlDtOMywYLtLlM7oNgkJSJvRQKC6WKP3kxWCzzmiMyt965isz0S42BkL1Hb1T09KvWqQNxMb6njiX+AflFKNOpU/H9k1FqKo3jCir9+vlPOxBajyvWIL83qdDvQ/RYLBbvQ2DTCiWBqNSTIYEgdu9OBukeCyoZpIqFJIPgnp8ghYSYYAEkJbmVQtohbqQQM8S9FOKHeCOFNEO8lkLq/4LIP4c5WL1LPVgzB2uQ0TVCrmBS3CIj1d8ZvQJTbBZZSuj7MDCYsg8QKsRWIFMRm5JIVWqPInWpUYt05q4MwFz78rbJpY+9vPD1KNkyQ7HsNTq6gm/Q1yh7ofvRFJIQx1sLs2L8iS55k6P7GA+syeHt1tYzdosxfm7Yy8Uwxo+1oPB0Vzt+wgzLbbl8QJCPKvKhST6+yQdJ+UgrH64/PubLHxzkTx/yRxi5fgCDvWoJPz+PXQAAAABJRU5ErkJggg=="},daf0:function(e,t,n){"use strict";var i=n("f184"),s=n.n(i);s.a},f184:function(e,t,n){}}]);